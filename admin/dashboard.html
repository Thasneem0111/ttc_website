<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>TTC - Admin Dashboard</title>
	<link rel="stylesheet" href="../styles.css">
	<style>
		/* quick page-level reset for admin layout */
		.admin-shell{display:flex;min-height:100vh}

		/* Admin dashboard styles (kept local to this page) */
		.sidebar{width:260px;background:linear-gradient(180deg,#313131,#1a1a1a);color:#fff;padding:28px 18px;display:flex;flex-direction:column;justify-content:flex-start}
		.sidebar .sidebar-brand{display:flex;flex-direction:column;align-items:center;gap:4px;text-align:center}
		.logo-circle img{max-width:110px;max-height:110px;display:block}
		.logo-fallback{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-weight:800;letter-spacing:0.6px}
		.brand-name{font-weight:800;font-size:14px;margin-top:6px;color:rgba(255,255,255,0.95)}
		.sidebar-nav{display:flex;flex-direction:column;margin-top:32px;gap:8px;align-items:stretch;width:100%}
		.sb-btn{background:transparent;border:none;color:inherit;padding:12px 14px;border-radius:8px;text-align:left;font-weight:700;cursor:pointer;transition:background .18s,transform .12s;width:100%}
		.sb-btn:hover{background:rgba(255, 255, 255, 0.06);transform:translateX(4px)}
		.sb-btn.active{background:rgba(255,255,255,0.12)}
		.sidebar-bottom{margin-top:auto}
		.sb-btn.logout{margin-top:6px;background:transparent;border-top:1px solid rgba(255,255,255,0.06);padding-top:16px}

		.admin-main{flex:1;padding:28px 34px;background-color:whitesmoke; }
		.admin-header h1{margin:0 0 18px 0;font-size:28px;color:#000000}

		.overview-cards{display:flex;gap:18px;margin-bottom:22px; }
		.overview-panel .overview-cards{margin:0;display:flex;gap:18px;}
		.overview-panel .card.small{background:#f2f2f26c; border: 1px solid #000000;}
		.overview-panel .card-label{color:#222}
		.overview-panel .card-number{color:#000}
		.card.small{background:#fff;border-radius:10px;padding:18px;box-shadow:0 8px 22px rgba(4,20,20,0.06);flex:0 0 230px}
		.card-label{color:#5b6b67;font-weight:700;margin-bottom:8px}
		.card-number{font-size:28px;font-weight:900;color:#0b5b49}

		.recent-requests{color:#000000;background:transparent;padding:6px 0}
		.section-head .view-all{color:#000000;text-decoration:none}
		.section-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
		.requests-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:12px;}
		.request-item{background:#fff;padding:14px;border-radius:10px;box-shadow:0 8px 20px rgba(4,20,20,0.04);display:flex;align-items:center;justify-content:space-between;border: 0.7px solid #5e5e5e;}
		.request-item .req-title{font-weight:800;color:#083233}
		.request-item .req-meta{color:#363636;font-size:13px}
		.request-item .req-time{color:#363636;font-size:13px}

		@media (max-width:900px){
			.sidebar{display:none}
			.admin-shell{padding-left:12px;padding-right:12px}
			.overview-cards{flex-direction:column}
		}
	</style>
</head>
<body>
	<div class="admin-shell">
		<aside class="sidebar">
			<div class="sidebar-top">
				<div class="sidebar-brand">
					<div class="logo-circle">
						<!-- Replace src with your TTC logo file -->
						<img src="../images/TTClogo.png" alt="TTC logo" onerror="this.style.display='none'">
					</div>
					<div class="brand-name">Turnkey Trading &amp; Contracting</div>
				</div>
			</div>

			<nav class="sidebar-nav">
				<button class="sb-btn active" onclick="location.href='dashboard.html'">Dashboard</button>
				<button class="sb-btn" onclick="location.href='requests.html'">Requests</button>
				<button class="sb-btn" onclick="location.href='projects.html'">Projects</button>
				<button class="sb-btn" onclick="location.href='services.html'">Services</button>
			</nav>

			<div class="sidebar-bottom">
				<button class="sb-btn" data-target="settings">Settings</button>
				<button class="sb-btn logout" data-target="logout">Logout</button>
			</div>
		</aside>

		<main class="admin-main">
			<header class="admin-header">
				<h1>Overview</h1>
			</header>

			<section class="overview-panel">
				<div class="overview-cards">
				<div class="card small">
					<div class="card-label">Total Services</div>
					<div class="card-number" id="total-services">0</div>
				</div>
				<div class="card small">
					<div class="card-label">Total Projects</div>
					<div class="card-number" id="total-projects">0</div>
				</div>
				<div class="card small">
					<div class="card-label">Total Requests</div>
					<div class="card-number" id="total-requests">0</div>
				</div>
				</div>
			</section>

			<section class="recent-requests">
				<div class="section-head"><h2>Recent Requests</h2><a href="#" class="view-all">View all</a></div>
				<ul id="recent-requests-list" class="requests-list">
					<!-- populated by JS -->
				</ul>
			</section>

		</main>
	</div>

	<script src="../script.js"></script>
	<script src="dashboard.js"></script>
	<script>
		// sample data; replace with real fetched data
		const sampleDashboardData = {
			services: 4,
			projects: 7,
			requests: 12,
			recent: [
				{title: 'New Request - Gate Repair', client: 'Mohammed', email: 'm@example.com', time: 'Dec 20, 2025 10:35'},
				{title: 'Quotation Request - Painting', client: 'Aisha', email: 'a@example.com', time: 'Dec 19, 2025 14:12'},
				{title: 'Site Survey - HVAC', client: 'Khaled', email: 'k@example.com', time: 'Dec 18, 2025 09:05'}
			]
		};

		// use provided helper if available, otherwise do a simple populate
		if(window.populateDashboard){
			window.populateDashboard(sampleDashboardData);
		} else {
			document.getElementById('total-services').textContent = sampleDashboardData.services;
			document.getElementById('total-projects').textContent = sampleDashboardData.projects;
			document.getElementById('total-requests').textContent = sampleDashboardData.requests;
			const list = document.getElementById('recent-requests-list');
			sampleDashboardData.recent.forEach(r=>{
				const li = document.createElement('li');
				li.className = 'request-item';
				li.innerHTML = `<div class="req-title">${r.title}</div><div class="req-meta">${r.client} â€¢ ${r.email}</div><div class="req-time">${r.time}</div>`;
				list.appendChild(li);
			});
		}

		// add simple sidebar button behaviour (just active state)
		document.querySelectorAll('.sb-btn').forEach(btn=>{
			btn.addEventListener('click', e=>{
				document.querySelectorAll('.sb-btn').forEach(b=>b.classList.remove('active'));
				btn.classList.add('active');
			});
		});
	</script>
</body>
</html>

